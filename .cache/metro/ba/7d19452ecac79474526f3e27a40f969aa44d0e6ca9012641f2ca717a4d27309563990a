{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":44,"column":37,"index":1653}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":44,"column":37,"index":1653}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"invariant","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"Fzi/BpZws2YooIGJ9b6u0HJtuks="}},{"name":"./Fetch","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":39,"index":74}}],"key":"Kw7I7/yXAEYxIMlpqbNuG+FKMRA="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.fetchDiscoveryAsync = fetchDiscoveryAsync;\n  exports.issuerWithWellKnownUrl = issuerWithWellKnownUrl;\n  exports.resolveDiscoveryAsync = resolveDiscoveryAsync;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _invariant = _interopRequireDefault(require(_dependencyMap[2], \"invariant\"));\n  var _Fetch = require(_dependencyMap[3], \"./Fetch\");\n  /**\n   * Append the well known resources path and OpenID connect discovery document path to a URL\n   * https://tools.ietf.org/html/rfc5785\n   */\n  function issuerWithWellKnownUrl(issuer) {\n    return `${issuer}/.well-known/openid-configuration`;\n  }\n  // @needsAudit\n  /**\n   * Fetch a `DiscoveryDocument` from a well-known resource provider that supports auto discovery.\n   * @param issuer An `Issuer` URL to fetch from.\n   * @return Returns a discovery document that can be used for authentication.\n   */\n  function fetchDiscoveryAsync(_x) {\n    return _fetchDiscoveryAsync.apply(this, arguments);\n  } // @needsAudit\n  /**\n   * Utility method for resolving the discovery document from an issuer or object.\n   *\n   * @param issuerOrDiscovery\n   */\n  function _fetchDiscoveryAsync() {\n    _fetchDiscoveryAsync = (0, _asyncToGenerator2.default)(function* (issuer) {\n      var json = yield (0, _Fetch.requestAsync)(issuerWithWellKnownUrl(issuer), {\n        dataType: 'json',\n        method: 'GET'\n      });\n      return {\n        discoveryDocument: json,\n        authorizationEndpoint: json.authorization_endpoint,\n        tokenEndpoint: json.token_endpoint,\n        revocationEndpoint: json.revocation_endpoint,\n        userInfoEndpoint: json.userinfo_endpoint,\n        endSessionEndpoint: json.end_session_endpoint,\n        registrationEndpoint: json.registration_endpoint\n      };\n    });\n    return _fetchDiscoveryAsync.apply(this, arguments);\n  }\n  function resolveDiscoveryAsync(_x2) {\n    return _resolveDiscoveryAsync.apply(this, arguments);\n  }\n  function _resolveDiscoveryAsync() {\n    _resolveDiscoveryAsync = (0, _asyncToGenerator2.default)(function* (issuerOrDiscovery) {\n      (0, _invariant.default)(issuerOrDiscovery && !['number', 'boolean'].includes(typeof issuerOrDiscovery), 'Expected a valid discovery object or issuer URL');\n      if (typeof issuerOrDiscovery === 'string') {\n        return yield fetchDiscoveryAsync(issuerOrDiscovery);\n      }\n      return issuerOrDiscovery;\n    });\n    return _resolveDiscoveryAsync.apply(this, arguments);\n  }\n});","lineCount":64,"map":[[10,2,1,0],[10,6,1,0,"_invariant"],[10,16,1,0],[10,19,1,0,"_interopRequireDefault"],[10,41,1,0],[10,42,1,0,"require"],[10,49,1,0],[10,50,1,0,"_dependencyMap"],[10,64,1,0],[11,2,2,0],[11,6,2,0,"_Fetch"],[11,12,2,0],[11,15,2,0,"require"],[11,22,2,0],[11,23,2,0,"_dependencyMap"],[11,37,2,0],[12,2,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,2,7,7],[16,11,7,16,"issuerWithWellKnownUrl"],[16,33,7,38,"issuerWithWellKnownUrl"],[16,34,7,39,"issuer"],[16,40,7,45],[16,42,7,47],[17,4,8,4],[17,11,8,11],[17,14,8,14,"issuer"],[17,20,8,20],[17,55,8,55],[18,2,9,0],[19,2,10,0],[20,2,11,0],[21,0,12,0],[22,0,13,0],[23,0,14,0],[24,0,15,0],[25,2,11,0],[25,11,16,22,"fetchDiscoveryAsync"],[25,30,16,41,"fetchDiscoveryAsync"],[25,31,16,41,"_x"],[25,33,16,41],[26,4,16,41],[26,11,16,41,"_fetchDiscoveryAsync"],[26,31,16,41],[26,32,16,41,"apply"],[26,37,16,41],[26,44,16,41,"arguments"],[26,53,16,41],[27,2,16,41],[27,4,31,0],[28,2,32,0],[29,0,33,0],[30,0,34,0],[31,0,35,0],[32,0,36,0],[33,2,32,0],[33,11,32,0,"_fetchDiscoveryAsync"],[33,32,32,0],[34,4,32,0,"_fetchDiscoveryAsync"],[34,24,32,0],[34,31,32,0,"_asyncToGenerator2"],[34,49,32,0],[34,50,32,0,"default"],[34,57,32,0],[34,59,16,7],[34,70,16,42,"issuer"],[34,76,16,48],[34,78,16,50],[35,6,17,4],[35,10,17,10,"json"],[35,14,17,14],[35,23,17,23],[35,27,17,23,"requestAsync"],[35,46,17,35],[35,48,17,36,"issuerWithWellKnownUrl"],[35,70,17,58],[35,71,17,59,"issuer"],[35,77,17,65],[35,78,17,66],[35,80,17,68],[36,8,18,8,"dataType"],[36,16,18,16],[36,18,18,18],[36,24,18,24],[37,8,19,8,"method"],[37,14,19,14],[37,16,19,16],[38,6,20,4],[38,7,20,5],[38,8,20,6],[39,6,21,4],[39,13,21,11],[40,8,22,8,"discoveryDocument"],[40,25,22,25],[40,27,22,27,"json"],[40,31,22,31],[41,8,23,8,"authorizationEndpoint"],[41,29,23,29],[41,31,23,31,"json"],[41,35,23,35],[41,36,23,36,"authorization_endpoint"],[41,58,23,58],[42,8,24,8,"tokenEndpoint"],[42,21,24,21],[42,23,24,23,"json"],[42,27,24,27],[42,28,24,28,"token_endpoint"],[42,42,24,42],[43,8,25,8,"revocationEndpoint"],[43,26,25,26],[43,28,25,28,"json"],[43,32,25,32],[43,33,25,33,"revocation_endpoint"],[43,52,25,52],[44,8,26,8,"userInfoEndpoint"],[44,24,26,24],[44,26,26,26,"json"],[44,30,26,30],[44,31,26,31,"userinfo_endpoint"],[44,48,26,48],[45,8,27,8,"endSessionEndpoint"],[45,26,27,26],[45,28,27,28,"json"],[45,32,27,32],[45,33,27,33,"end_session_endpoint"],[45,53,27,53],[46,8,28,8,"registrationEndpoint"],[46,28,28,28],[46,30,28,30,"json"],[46,34,28,34],[46,35,28,35,"registration_endpoint"],[47,6,29,4],[47,7,29,5],[48,4,30,0],[48,5,30,1],[49,4,30,1],[49,11,30,1,"_fetchDiscoveryAsync"],[49,31,30,1],[49,32,30,1,"apply"],[49,37,30,1],[49,44,30,1,"arguments"],[49,53,30,1],[50,2,30,1],[51,2,30,1],[51,11,37,22,"resolveDiscoveryAsync"],[51,32,37,43,"resolveDiscoveryAsync"],[51,33,37,43,"_x2"],[51,36,37,43],[52,4,37,43],[52,11,37,43,"_resolveDiscoveryAsync"],[52,33,37,43],[52,34,37,43,"apply"],[52,39,37,43],[52,46,37,43,"arguments"],[52,55,37,43],[53,2,37,43],[54,2,37,43],[54,11,37,43,"_resolveDiscoveryAsync"],[54,34,37,43],[55,4,37,43,"_resolveDiscoveryAsync"],[55,26,37,43],[55,33,37,43,"_asyncToGenerator2"],[55,51,37,43],[55,52,37,43,"default"],[55,59,37,43],[55,61,37,7],[55,72,37,44,"issuerOrDiscovery"],[55,89,37,61],[55,91,37,63],[56,6,38,4],[56,10,38,4,"invariant"],[56,28,38,13],[56,30,38,14,"issuerOrDiscovery"],[56,47,38,31],[56,51,38,35],[56,52,38,36],[56,53,38,37],[56,61,38,45],[56,63,38,47],[56,72,38,56],[56,73,38,57],[56,74,38,58,"includes"],[56,82,38,66],[56,83,38,67],[56,90,38,74,"issuerOrDiscovery"],[56,107,38,91],[56,108,38,92],[56,110,38,94],[56,159,38,143],[56,160,38,144],[57,6,39,4],[57,10,39,8],[57,17,39,15,"issuerOrDiscovery"],[57,34,39,32],[57,39,39,37],[57,47,39,45],[57,49,39,47],[58,8,40,8],[58,21,40,21,"fetchDiscoveryAsync"],[58,40,40,40],[58,41,40,41,"issuerOrDiscovery"],[58,58,40,58],[58,59,40,59],[59,6,41,4],[60,6,42,4],[60,13,42,11,"issuerOrDiscovery"],[60,30,42,28],[61,4,43,0],[61,5,43,1],[62,4,43,1],[62,11,43,1,"_resolveDiscoveryAsync"],[62,33,43,1],[62,34,43,1,"apply"],[62,39,43,1],[62,46,43,1,"arguments"],[62,55,43,1],[63,2,43,1],[64,0,43,1],[64,3]],"functionMap":{"names":["<global>","issuerWithWellKnownUrl","fetchDiscoveryAsync","resolveDiscoveryAsync"],"mappings":"AAA;OCM;CDE;OEO;CFc;OGO;CHM"}},"type":"js/module"}]}